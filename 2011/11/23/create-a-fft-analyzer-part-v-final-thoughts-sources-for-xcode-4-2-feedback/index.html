
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head profile="http://gmpg.org/xfn/11">
  <meta charset="utf-8">
  <title>Create a FFT Analyzer part V: final thoughts, sources for XCode 4.2 & feedback | Sample & Hold </title>
  <meta name="author" content="Frederic Ghilini">

  
  <meta name="description" content="Create a FFT Analyzer Part v: Final Thoughts, Sources for XCode 4.2 & Feedback Posted: Nov 23rd, 2011 by fredguile in VST Plugins / Audio Units 0 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sample-hold.com/2011/11/23/create-a-fft-analyzer-part-v-final-thoughts-sources-for-xcode-4-2-feedback">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Sample & Hold" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  
</head>
<body>
	<div id="page">
		<div id="nav"><ul>
    
    
    
    
    <li class="page_item">
        <a href="/">Home</a>
    </li>

    
    
    
    <li class="page_item">
        <a href="/about">About the&nbsp;author</a>
    </li>

    
    
    
    <li class="page_item">
        <a href="/tutorials-index">Tutorials&nbsp;index</a>
    </li>

    
    
    
    <li class="page_item">
        <a href="/projects">Projects</a>
    </li>

    
    
    
    <li class="page_item">
        <a href="/useful-resources">Useful&nbsp;resources</a>
    </li>
</ul></div>
		<div id="header" role="banner"><h1>
	<a href="/">Sample & Hold</a>
</h1>

<div class="description">Ideas, thoughts and tutorials on audio programming</div>

<div class="rss">
	<a href="/atom.xml" title="RSS">stay updated via rss</a>
</div></div>
		<hr/>
		<div id="container">
			<div id="sidebar" role="complementary">
<div class="search-box">
    <form action="http://google.com/search" method="get">
        <input type="hidden" name="q" value="site:sample-hold.com"/>
        <input class="search-field" size="15" type="text" name="q" results="0" placeholder="Search"
               value="search this site" onfocus="if(this.value == 'search this site') {this.value = '';}"
               onblur="if (this.value == '') {this.value = 'search this site';}"/>
        <input type="submit" value="" class="search-go"/>
    </form>
</div>


<ul>

<li><h2>Follow me</h2>
    <ul id="follow_me">
        <li>
            <a href="http://www.linkedin.com/in/fredericghilini" target="_blank">LinkedIn</a>
        </li>
        <li>
            <a href="http://www.xing.com/profile/Frederic_Ghilini" target="_blank">Xing</a>
        </li>
        <li>
            <a href="https://github.com/fredguile" target="_blank">GitHub</a>
        </li>
    </ul>
</li><li><h2>Recent Posts</h2>
    <ul id="recent_posts">
        
        <li class="post">
            <a href="/2011/12/19/make-fun-of-your-launchpad-with-launchplay-vst-plugin/">
                
                Make Fun of Your Launchpad With LaunchPlay VST Plugin
                
            </a>
        </li>
        
        <li class="post">
            <a href="/2011/11/23/create-a-fft-analyzer-part-v-final-thoughts-sources-for-xcode-4-2-feedback/">
                
                Create a FFT Analyzer Part v: Final Thoughts, Sources for XCode 4.2 & Feedback
                
            </a>
        </li>
        
        <li class="post">
            <a href="/2011/11/23/create-a-fft-analyzer-part-iv-debugging-our-audio-unit-with-au-lab/">
                
                Create a FFT Analyzer Part IV: Debugging Our Audio Unit With AU Lab
                
            </a>
        </li>
        
        <li class="post">
            <a href="/2011/11/23/create-a-fft-analyzer-part-iii-building-ui-with-cocoa-and-objective-c/">
                
                Create a FFT Analyzer Part III: Building UI With Cocoa and Objective-C
                
            </a>
        </li>
        
        <li class="post">
            <a href="/2011/11/23/create-a-fft-analyzer-part-ii-designing-our-spectral-processor/">
                
                Create a FFT Analyzer Part II: Designing Our Spectral Processor
                
            </a>
        </li>
        
    </ul>
</li><li><h2>Categories</h2>
    <ul id="category_list">
        <li><a href='/category/general'>General (1)</a></li><li><a href='/category/vst-plugins-slash-audio-units'>VST Plugins / Audio Units (7)</a></li>
    </ul>
</li><li><h2>Popular tags</h2>
    <div id="tag_cloud">
        <a style="font-size: 28px" href="/tag/audio/">Audio</a>
<a style="font-size: 21px" href="/tag/c-plus-plus/">C++</a>
<a style="font-size: 12px" href="/tag/debugging/">Debugging</a>
<a style="font-size: 12px" href="/tag/launchpad/">Launchpad</a>
<a style="font-size: 27px" href="/tag/mac-os-x/">Mac OS X</a>
<a style="font-size: 12px" href="/tag/objective-c/">Objective-C</a>
<a style="font-size: 27px" href="/tag/xcode/">XCode</a>

    </div>
</li><li><h2>Archives</h2>
    <ul id="archives">
        

        
        
        

        
        
        

        
        <li>
            <a href="/2011/12">December 2011</a>
        </li>
        

        

        

        
        
        

        
        
        

        

        

        

        
        
        

        
        
        

        

        

        

        
        
        

        
        
        

        

        

        

        
        
        

        
        
        

        

        

        

        
        
        

        
        
        

        

        

        

        
        
        

        
        
        

        

        

        

        
        
        

        
        <li>
            <a href="/2011/11">November 2011</a>
        </li>
        

        
    </ul>
</li><li><h2>License</h2>
    <div class="textwidget">
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">
            <img
                    alt="Creative Commons License"
                    style="border-width:0;padding:1em;"
                    src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png">
        </a>
        <br>
        <span>Sample &amp; Hold source code and articles</span>
        by
        <a href="http://www.sample-hold.com/" rel="cc:attributionURL">Fred Ghilini</a> is licensed under a
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons
            Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.
    </div>
</li>

</ul>
</div>
			<div id="content" role="main"><div id="content-inner" class="column">
	
<div class="posttitle">
	<h2 class="pagetitle">
		
      	Create a FFT Analyzer Part v: Final Thoughts, Sources for XCode 4.2 & Feedback
    	
	</h2>
	
	<small>
		Posted: 
		








<time datetime="2011-11-23T16:34:55+01:00" pubdate data-updated="true">Nov 23<span>rd</span>, 2011</time>
		
  


by <strong>fredguile</strong>
		

<span class="categories">
  
    in <a class='category' href='/category/vst-plugins-slash-audio-units/'>VST Plugins / Audio Units</a>
  
</span>


	</small>
	
</div>




<div class="postcomments">
    <a href="#disqus_thread" data-disqus-identifier="http://sample-hold.com/2011/11/23/create-a-fft-analyzer-part-v-final-thoughts-sources-for-xcode-4-2-feedback/">0</a>
</div>

<div class="entry">
	<p><img class="alignleft" src="http://guileboard.files.wordpress.com/2011/11/au.gif"> This part wraps up our tutorial on building an audio effect as Audio Unit for OS X Lion. Though it is not the craziest plug-in you&rsquo;ll ever built, it made us learn some basis about DSP programming, as well it introduced the XCode environment for developing Audio Units. Of course, there are numerous improvements we could do on this project. In this article, I&rsquo;ll make some remarks about my work and  also a few issues I met during development. Last but not least, we recall the GitHub repository URL for you to grab the code and make our own version.</p>

<!-- more -->


<h3>Remarks</h3>

<p>After thinking twice about it, here are the things I finally dislike :</p>

<ul>
<li><p><strong>Mixing C, C++ and Objective-C in a (small) project is a bad idea</strong>: it definitely make your developer duties harder. I would personally prefer to stick to C++ for all tasks. Using Cocoa UI was a good way to challenge the native SDK of Mac, but I may prefer using another SDK that avoid sprinkling our code, and thus, knowledge.</p></li>
<li><p><strong>Not all features of Cocoa are supported by AU/VST hosts</strong>: for instance, I couldn&rsquo;t resize my spectrum analyzer view in Ableton Live and Garage Band, and I couldn&rsquo;t display the NSMenu as context menu when right-clicking on the Cocoa window.</p></li>
<li><p><strong>NSBezierPath is slow</strong>: You might have noticed how slow it is when choosing 16384 as your FFT block size. We could  probably have had better results with a Quartz or OpenGL rendering. To be perfectly honest, at first, I tried to elaborate an OpenGL version of this tutorial, but I ran into an graphical bug with Ableton Live: it seemed that my plug-in wasn&rsquo;t properly releasing the OpenGL context, thus corrupting the entire Live UI. I could not get out of this, so I decided to revert to a more &ldquo;portable&rdquo; solution for drawing the spectrum graph (though it&rsquo;s exaggerated  writing that Cocoa is &ldquo;portable&rdquo; ;)).</p></li>
<li><p><strong>The overall result isn&rsquo;t as precise as we wanted</strong>: our graph is not big enough to give you valuable informations about dB amplitudes (especially if the host doesn&rsquo;t allow our plug-in to be resized!). We should have added some precious features like zoom, prevision, hold peaks, etc. (this is out of scope of this tutorial). And there might be more precise methods rather than simply adding a constant dB correction into our <em>SimpleSpectrumProcessor</em> class.</p></li>
<li><p><strong>We should have proposed a solution for developing both VST au AU versions of our Spectrum Analyzer</strong>: but, as a drawback, it would make our tutorial much more difficult. Anyway, I&rsquo;ll probably publish another tutorial for this in the future.</p></li>
</ul>


<h3>Give feedback and share this code</h3>

<p>Feedback is welcome! You may leave a comment at the bottom of this article.</p>

<p>In the meantime, you can contribute to this tutorial by registering yourself on GitHub and cloning my repository : <a href="https://github.com/Sample-Hold/SimpleSpectrumAnalyzer">https://github.com/Sample-Hold/SimpleSpectrumAnalyzer</a></p>

<h3>Final words</h3>

<p>I spent a couple of minutes hacking my code in order to show you in a video how I had corrupted the Ableton Live UI when I was using a NSOpenGLView instead of a NSView. Unfortunately, I&rsquo;m completely unable to reproduce this bug! That&rsquo;ll teach me not to version every compiled binary as nightly builds ;)</p>

<p>Before I throw out this hack, I can show you what it is like this OpenGL version of the Simple Spectrum Analyzer:</p>

<iframe width="560" height="420" src="http://www.youtube.com/embed/8nnl2BFCZQ8?color=white&theme=light"></iframe>


<p>As a conclusion, we can see that the OpenGL alternative still renders slowly with an FFT size of 16384 samples. So there must be a lot of performance tweaks to perform elsewhere. For anybody interested, the alternate code has been pushed to GitHub.</p>

</div>
<div class="entry">
    
<div id="fb-root"></div>
<script>(function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) {
        return;
    }
    js = d.createElement(s);
    js.id = id;
    js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js#appId=687955091216855&xfbml=1";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-like" data-href="https://developers.facebook.com/docs/plugins/"
     data-width="The pixel width of the plugin" data-height="The pixel height of the plugin" data-colorscheme="light"
     data-layout="standard" data-action="like" data-show-faces="true" data-send="false"></div>


</div>

<div id="disqus_thread"></div>


</div>
<div id="nav-post">
	<div class="navigation-bott">
		
		<div class="leftnav">
			<a rel="prev" href="/2011/11/23/create-a-fft-analyzer-part-iv-debugging-our-audio-unit-with-au-lab/" title="Previous Post: Create a FFT Analyzer part IV: debugging our Audio Unit with AU Lab">Create a FFT Analyzer part IV: debugging our Audio Unit with AU Lab</a>
		</div>
		
		
		<div class="rightnav">
			<a rel="next" href="/2011/12/19/make-fun-of-your-launchpad-with-launchplay-vst-plugin/" title="Next Post: Make fun of your Launchpad with LaunchPlay VST plugin">Make fun of your Launchpad with LaunchPlay VST plugin</a>
		</div>
		
	</div>
</div></div>
			<hr/>
			<div id="footer" role="contentinfo"></div>
		</div>
	</div>
	<div id="footer-bott">Copyright &copy; 2013 - Frederic Ghilini |
Powered by <a rel="generator" href="http://octopress.org">Octopress</a>

</div>
    

<script type="text/javascript">
    var dsq_scripts = [], dsq = null;
    var disqus_shortname = 'sample-hold';



    // var disqus_developer = 1;
    var disqus_identifier = 'http://sample-hold.com/2011/11/23/create-a-fft-analyzer-part-v-final-thoughts-sources-for-xcode-4-2-feedback/';
    var disqus_url = 'http://sample-hold.com/2011/11/23/create-a-fft-analyzer-part-v-final-thoughts-sources-for-xcode-4-2-feedback/';

    dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    dsq_scripts.push(dsq);


    dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    dsq_scripts.push(dsq);

    $(function () {
        $(dsq_scripts).each(function() {
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(this);
        });
    });
</script>



  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-44962545-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



</body>
</html>
